"use strict";(self.webpackChunkhacker_news=self.webpackChunkhacker_news||[]).push([[352],{940:(e,t,r)=>{r.d(t,{Y:()=>A});var o=r(5043),n=r(3216),i=r(3969),s=r(7799),a=r(9992),l=r(579);const c=(0,a.A)((0,l.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),d=(0,a.A)((0,l.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),h=(0,a.A)((0,l.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew");var m=r(4874),p=r(3912),x=r(5761),g=r(6638),E=r(3942),T=r(3008),u=r(9535);const A=e=>{let{showBack:t,showUpdate:r,showMenu:a,isLoading:A,refreshNews:j}=e;const O=(0,n.Zp)(),f=(0,n.g)(),[S,w]=(0,o.useState)(null),R=Boolean(S);return(0,l.jsxs)(i.A,{sx:u.R.commonWrapper,"data-testid":g.b.HEADER.HEADER_ROOT,children:[(0,l.jsx)(i.A,{sx:{...u.R.button(),visibility:t?"visible":"hidden"},onClick:()=>{T.Q.getIdFromUrl(f.id)?O(x.e.NEWS_LIST,{state:{fromBack:!0}}):O(x.e.START_PAGE)},"data-testid":g.b.HEADER.BACK_BUTTON,children:(0,l.jsx)(h,{sx:u.R.icon})}),(0,l.jsxs)(i.A,{sx:{...u.R.logoWrapper,...A&&u.R.disabledLogoWrapper},"data-testid":g.b.HEADER.APP_LOGO,onClick:()=>{O(x.e.START_PAGE)},children:[(0,l.jsx)(m.g,{size:32,color:E.Ql}),(0,l.jsx)(s.A,{sx:u.R.title,children:"Hacker News"})]}),(0,l.jsxs)(i.A,{sx:u.R.rightButtonWrapper,children:[(0,l.jsx)(i.A,{sx:{...A?u.R.disabledButton:u.R.button(),visibility:r?"visible":"hidden"},onClick:j,"data-testid":g.b.HEADER.UPDATE_BUTTON,children:(0,l.jsx)(c,{sx:u.R.icon})}),(0,l.jsx)(i.A,{sx:{...A?u.R.disabledButton:u.R.button(R),visibility:a?"visible":"hidden"},onClick:e=>{w(e.currentTarget)},"data-testid":g.b.HEADER.MENU_BUTTON,children:(0,l.jsx)(d,{sx:u.R.icon})})]}),R&&(0,l.jsx)(p.z,{open:R,switcherOpen:S,closeSwitcher:()=>{w(null)}})]})}},1319:(e,t,r)=>{r.d(t,{o:()=>o});const o=e=>e.hackerNews.showedStoryType},1801:(e,t,r)=>{r.d(t,{S:()=>n});const o="https://hacker-news.firebaseio.com/v0",n={STORY:e=>`${o}/item/${e}.json?print=pretty`,USER:e=>`${o}/user/${e}.json`,COMMENT:e=>`${o}/item/${e}.json`,MAX_ITEM_ID:`${o}/maxitem.json`,TOP_STORIES:`${o}/topstories.json`,NEW_STORIES:`${o}/newstories.json?print=pretty`,ASK_STORIES:`${o}/askstories.json`,SHOW_STORIES:`${o}/showstories.json`,JOB_STORIES:`${o}/jobstories.json`,BEST_STORIES:`${o}/beststories.json`,ITEM:e=>`${o}/item/${e}.json`,ITEM_BY_ID:e=>`${o}/item/${e}.json`}},2538:(e,t,r)=>{r.d(t,{r:()=>o});class o{static formatTimeAgo(e){if(e<0)throw new Error("Timestamp cannot be negative");const t=Date.now(),r=Math.floor((t-1e3*e)/1e3);if(r<0)throw new Error("Timestamp cannot be negative");const o=3600;if(r<60)return`${r} second${1!==r?"s":""} ago`;if(r<o){const e=Math.floor(r/60);return`${e} minute${1!==e?"s":""} ago`}if(r<86400){const e=Math.floor(r/o);return`${e} hour${1!==e?"s":""} ago`}const n=Math.floor(r/86400);return`${n} day${1!==n?"s":""} ago`}}},3008:(e,t,r)=>{r.d(t,{Q:()=>n});var o=r(1387);class n{static generatePathWithId(e,t){if(t<0)throw new Error("ID cannot be negative.");if(0===t)throw new Error("ID cannot be 0.");return(0,o.tW)(e,{id:t})}static cutIdFromUrl(){const e=new URL(window.location.href).pathname.split("/").slice(0,3).join("/");window.history.replaceState({},"",e.toString())}static getIdFromUrl(e){return Number(e)}static getTestUrl(e,t){return`/${e.split("/")[1]}/${t}`}}},3912:(e,t,r)=>{r.d(t,{z:()=>f});var o=r(5360),n=r(2156),i=r(7799),s=r(9185),a=r(1319),l=r(7523),c=r(6638),d=r(7827),h=r(458),m=r(1777),p=r(6788),x=r(3736),g=r(3830),E=r(8358),T=r(2632),u=r(579);const A=[{value:T.k.ASK,title:"Ask",icon:e=>(0,u.jsx)(p.A,{sx:e})},{value:T.k.BEST,title:"Best",icon:e=>(0,u.jsx)(h.A,{sx:e})},{value:T.k.JOB,title:"Job",icon:e=>(0,u.jsx)(x.A,{sx:e})},{value:T.k.NEW,title:"New",icon:e=>(0,u.jsx)(m.A,{sx:e})},{value:T.k.SHOW,title:"Show",icon:e=>(0,u.jsx)(E.A,{sx:e})},{value:T.k.TOP,title:"Top",icon:e=>(0,u.jsx)(g.A,{sx:e})}];var j=r(3942);const O={menuItem:(e,t)=>({backgroundColor:j.ON,width:t?e:"150px",color:j.w8,"&:hover":{color:j.w8,backgroundColor:j.iA}}),activeMenuItem:{color:j.Zv,backgroundColor:j.RC},title:{fontSize:"0.875rem",color:"inherit",marginLeft:"0.5rem"},activeTitle:{fontWeight:"600",color:"inherit"},activeIcon:{color:"inherit"}},f=e=>{let{open:t,switcherOpen:r,closeSwitcher:h,fullWidth:m}=e;const p=(0,l.GV)(a.o),x=(0,l.jL)(),g=e=>e===p;return(0,u.jsx)(o.A,{open:t,anchorEl:r,onClose:h,disableAutoFocusItem:!0,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{style:{width:m?`${d.I}px`:"auto",minWidth:m?"unset":"150px",marginTop:"0.25rem"}},"data-testid":c.b.NEWS_TYPE_SWITCHER.SWITCHER_ROOT,children:A.map(e=>(0,u.jsxs)(n.A,{onClick:()=>{return t=e.value,x((0,s.CA)()),x((0,s._c)()),x((0,s.BY)()),x(null===s.cR||void 0===s.cR?void 0:(0,s.cR)(t)),void h();var t},sx:{...O.menuItem(d.I,m),...g(e.value)&&O.activeMenuItem},"data-testid":c.b.NEWS_TYPE_SWITCHER.SWITCHER_ITEM(e.value),children:[e.icon(g(e.value)&&O.activeIcon),(0,u.jsx)(i.A,{sx:{...O.title,...g(e.value)&&O.activeTitle},children:e.title})]},e.value))})}},4874:(e,t,r)=>{r.d(t,{g:()=>a});var o=r(3969);r(5043);const n=r.p+"static/media/mainLogo.20ca4fb8dec9041b1379fd1dfacea91f.svg",i=(e,t)=>({backgroundColor:t,height:`${e}px`});var s=r(579);const a=e=>{let{size:t,testId:r,color:a}=e;return(0,s.jsx)(o.A,{sx:i(t,a),"data-testid":r,children:(0,s.jsx)("img",{src:n,alt:"app-logo",width:t,height:t})})}},6638:(e,t,r)=>{r.d(t,{b:()=>o});const o={START_PAGE:{START_PAGE_ROOT:"start-page-root",GO_TO_NEWS_BUTTON:"go-to-news-button",APP_LOGO:"app-logo",APP_TITLE:"app-title",SWITCHER_BUTTON:"switcher-button",ACTIONS_TITLE:"actions-title",FOOTER_QUOTE_SKELETON:"footer-quote-skeleton",FOOTER_QUOTE_TEXT:"footer-quote-text",FOOTER_ROOT:"footer-root",CUSTOM_DIVIDER:"custom-divider"},NEWS_PAGE:{NEWS_PAGE_ROOT:"news-page-root",NEWS_ITEM_IN_LIST:e=>`news-list-in-list-${e}`,NEWS_SKELETON:"news-skeleton",NEWS_PLACEHOLDER:"news-placeholder",NEWS_ERROR_PLACEHOLDER:"news-error-placeholder"},STORY_PAGE:{STORY_PAGE_ROOT:e=>`story-page-root-${e}`,STORY_HEADER:e=>`story-header-${e}`,STORY_HEADER_SKELETON:"story-header-skeleton",STORY_HEADER_TITLE:e=>`story-header-title-${e}`,STORY_HEADER_AUTHOR:e=>`story-header-author-${e}`,STORY_HEADER_PUBLISHED:e=>`story-header-published-${e}`,STORY_HEADER_REDIRECT_TO_STORY:e=>`story-header-redirect-to-story-${e}`,STORY_HEADER_ERROR_PLACEHOLDER:"story-header-error-placeholder"},COMMENTS:{COMMENTS_ROOT:e=>`comments-root-${e}`,COMMENT_ITEM:e=>`comment-item-${e}`,SHOW_NESTED_COMMENTS_BUTTON:e=>`show-nested-comments-button-${e}`,HIDE_NESTED_COMMENTS_BUTTON:e=>`hide-nested-comments-button-${e}`,RELOAD_NESTED_COMMENTS_BUTTON:e=>`reload-nested-comments-button-${e}`,NESTED_COMMENTS_ROOT:e=>`nested-comments-root-${e}`,NESTED_COMMENTS_ERROR_PLACEHOLDER:e=>`nested-comments-error-placeholder-${e}`,COMMENTS_SKELETON:"comments-skeleton",COMMENTS_PLACEHOLDER:"comments-placeholder",COMMENTS_ERROR_PLACEHOLDER:"comments-error-placeholder"},HEADER:{HEADER_ROOT:"header-root",BACK_BUTTON:"back-button",UPDATE_BUTTON:"update-button",MENU_BUTTON:"menu-button",APP_LOGO:"app-logo"},NEWS_TYPE_SWITCHER:{SWITCHER_ROOT:"switcher-root",SWITCHER_ITEM:e=>`switcher-item-${e}`}}},7160:(e,t,r)=>{r.d(t,{A:()=>o});r(5043);const o=r.p+"static/media/errorPlaceholder.04d3c7e57a96d390a811f35b3188e926.svg"},7523:(e,t,r)=>{r.d(t,{GV:()=>s,S4:()=>a,jL:()=>i});var o=r(673),n=r(3003);const i=n.wA,s=n.d4,a=o.zD.withTypes()},7827:(e,t,r)=>{r.d(t,{I:()=>n,R:()=>i});var o=r(3942);const n=235,i={pageWrapper:{backgroundColor:o.RC,width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},topContent:{display:"flex",justifyContent:"center",alignItems:"center"},bottomContent:{display:"flex",flexDirection:"column",marginTop:"4rem",maxWidth:"50vw",height:"48px"},contentWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 6rem"},logoWrapper:{margin:"0 6rem",border:`2px solid ${o.w8}`},showNewsButton:{height:"36px",width:`calc(${n}px + 32px)`,backgroundColor:o.Ql,color:o.ON,fontWeight:"600",textTransform:"none"},imgWrapper:{backgroundColor:o.Ql,height:"128px"},selectorWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},selectorHelper:{fontSize:"2rem",fontWeight:"600",color:o.Ql},switcherButton:{width:"200px",height:"42px",border:`1.5px solid ${o.SG}`,borderRadius:"6px",backgroundColor:o.ON,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",cursor:"pointer",margin:"1.5rem 0"},storiesType:{fontSize:"0.875rem",fontWeight:"600",color:o.Ql},quoteTitle:{fontWeight:"1rem",fontStyle:"italic",color:o.w8},quoteAuthor:{fontWeight:"0.875rem",fontStyle:"italic",alignSelf:"flex-end",color:o.w8}}},8856:(e,t,r)=>{r.d(t,{X:()=>l});var o=r(3969),n=r(8996),i=r(3942);const s={horizontal:{backgroundColor:i.w8,margin:"0.75rem 0",height:"1px",width:"100%"},vertical:e=>({height:`${e}px`,width:"2px",backgroundColor:i.w8})};var a=r(579);const l=e=>{let{position:t,height:r}=e;return(0,a.jsx)(o.A,{sx:t===n.n.VERTICAL?s.vertical(r):s.horizontal})}},8996:(e,t,r)=>{r.d(t,{n:()=>o});const o={VERTICAL:"vertical",HORIZONTAL:"horizontal"}},9185:(e,t,r)=>{r.d(t,{nY:()=>d,x8:()=>x,X0:()=>m,BY:()=>h,CA:()=>E,_c:()=>p,k9:()=>j,a_:()=>O,En:()=>A,Ym:()=>u,QJ:()=>g,eq:()=>c,cR:()=>T});var o=r(7523),n=r(1801),i=r(854),s=r.n(i);class a{static getHeaders(){return{headers:{"Content-Type":"application/json"}}}static get(e){return s().get(e,this.getHeaders())}}var l=r(9403);const{setNewStories:c,addActiveStory:d,clearActiveStories:h,addStoryComments:m,clearAllStoryComments:p,addNestedCommentsById:x,removeNestedCommentsById:g,clearAllNestedComments:E,setShowedStoryType:T}=l._.actions,u=(0,o.S4)("hackerNews/getStoryIds",async e=>{try{return(await a.get(e)).data}catch(t){console.log(t)}}),A=(0,o.S4)("hackerNews/getStoryById",async e=>{try{return(await a.get(n.S.STORY(e))).data}catch(t){console.log(t)}}),j=(0,o.S4)("hackerNews/getCommentById",async e=>{try{return(await a.get(n.S.COMMENT(e))).data}catch(t){console.log(t)}}),O=(0,o.S4)("hackerNews/getRandomQuote",async()=>{try{return(await a.get("https://stoic-quotes.com/api/quote")).data}catch(e){console.log(e)}})},9352:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var o=r(5043),n=r(3216),i=r(3969),s=r(940),a=r(7523),l=r(1603);const c=e=>(0,l.jM)(e.hackerNews.activeStories,e=>e);var d=r(9185),h=r(3008);class m{}m.getObjectKeys=e=>Object.keys(e);var p=r(6638),x=r(7799);var g=r(8856),E=r(2538),T=r(8996),u=r(9992),A=r(579);const j=(0,u.A)((0,A.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),O=(0,u.A)((0,A.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward");var f=r(4020),S=r(3942);const w={button:{fontSize:"0.875rem",fontWeight:"600",color:S.Ql,textTransform:"none","&:hover":{backgroundColor:S.Q6}}},R=e=>{let{children:t,...r}=e;return(0,A.jsx)(f.A,{...r,sx:w.button,children:t})};var C=r(5120);const _=e=>(0,l.jM)(e.hackerNews.nestedStoryComments,e=>e),y=(0,u.A)((0,A.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"}),"Update");var b=r(7160);const N={placeholderWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"1rem 0"},textWrapper:{marginTop:"6rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"16px"},text:{fontSize:"1.125rem",fontWeight:"600",color:S.w8},img:{marginTop:"2rem"}},v=e=>{let{loadNestedComments:t,kids:r,commentId:o}=e;return(0,A.jsxs)(i.A,{sx:N.placeholderWrapper,"data-testid":p.b.COMMENTS.NESTED_COMMENTS_ERROR_PLACEHOLDER(o),children:[(0,A.jsxs)(R,{startIcon:(0,A.jsx)(y,{}),onClick:()=>t(null!==r&&void 0!==r?r:[]),"data-testid":p.b.COMMENTS.RELOAD_NESTED_COMMENTS_BUTTON(o),children:["Reload ",r.length," Nested Comments"]}),(0,A.jsx)("img",{style:N.img,src:b.A,alt:"error-placeholder",width:200}),(0,A.jsxs)(i.A,{sx:N.textWrapper,children:[(0,A.jsx)(x.A,{sx:N.text,children:"Oops! Nested comments went on a break."}),(0,A.jsx)(x.A,{sx:N.text,children:"We're having trouble loading them. Please try again later."})]})]})},I={blockWrapper:{margin:"1rem 0",padding:"1rem 0",borderTop:`1.5px dashed ${S.w8}`,borderBottom:`1.5px dashed ${S.w8}`},text:{fontSize:"1rem",fontStyle:"italic",color:S.w8}},W=()=>(0,A.jsx)(i.A,{sx:I.blockWrapper,children:(0,A.jsx)(x.A,{sx:I.text,children:"Deleted Comment"})}),M={commonWrapper:{display:"flex",flexDirection:"column",margin:"1rem 0 0",width:"100%"},commentInfoWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px"},commentAuthor:{fontSize:"0.875rem",fontWeight:"600",color:S.w8},commentDate:{fontSize:"0.75rem",fontWeight:"400",color:S.w8},commentTitle:{fontSize:"1rem",fontWeight:"400",color:S.w8}},D=e=>{let{comment:t}=e;return t.deleted?(0,A.jsx)(W,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(i.A,{sx:M.commonWrapper,"data-testid":p.b.COMMENTS.COMMENT_ITEM(t.id),children:[(0,A.jsxs)(i.A,{sx:M.commentInfoWrapper,children:[(0,A.jsx)(x.A,{sx:M.commentAuthor,children:t.by}),(0,A.jsx)(x.A,{sx:M.commentDate,children:E.r.formatTimeAgo(t.time)})]}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(x.A,{sx:M.commentTitle,children:t.text})]}),(0,A.jsx)(H,{comment:t})]})},L=e=>{let{commentId:t}=e;const r=(0,a.GV)(e=>((e,t)=>(0,l.jM)(e.hackerNews.nestedStoryComments[t],e=>e))(e,t));return(0,A.jsx)(i.A,{width:"100%","data-testid":p.b.COMMENTS.NESTED_COMMENTS_ROOT(t),children:r.map(e=>(0,A.jsx)(D,{comment:e},e.id))})},k={buttonWrapper:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"0.5rem"},nestedCommentsWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:"5rem",marginBottom:"1rem",width:"100%"},hiddenNestedCommetsWrapper:{marginBottom:"0"}},H=e=>{let{comment:t}=e;const r=(0,a.jL)(),n=(0,a.GV)(_),[s,l]=(0,o.useState)(!1),[c,h]=(0,o.useState)(!1),m=e=>!n[e]||0===n[e].length,x=async e=>{try{h(!1),l(!0);const o=e.map(e=>r((0,d.k9)(e)).unwrap());await Promise.all(o).then(e=>{r((0,d.x8)({id:t.id,comments:e}))})}catch(o){h(!0)}finally{l(!1)}};return(0,A.jsx)(i.A,{width:"100%",children:t.kids&&t.kids.length>0&&(0,A.jsx)(i.A,{sx:k.buttonWrapper,children:s?(0,A.jsx)(i.A,{ml:"4rem",children:(0,A.jsx)(C.D,{size:32})}):c?(0,A.jsx)(v,{loadNestedComments:x,kids:t.kids,commentId:t.id}):(0,A.jsxs)(i.A,{sx:{...k.nestedCommentsWrapper,...m(t.id)&&k.hiddenNestedCommetsWrapper},children:[!m(t.id)&&(0,A.jsx)(R,{startIcon:(0,A.jsx)(O,{}),onClick:()=>{return e=t.id,void r((0,d.QJ)(e));var e},"data-testid":p.b.COMMENTS.HIDE_NESTED_COMMENTS_BUTTON(t.id),children:"Hide Nested Comments"}),!m(t.id)&&(0,A.jsx)(L,{commentId:t.id}),m(t.id)&&(0,A.jsxs)(R,{startIcon:(0,A.jsx)(j,{}),onClick:()=>{var e;return x(null!==(e=t.kids)&&void 0!==e?e:[])},"data-testid":p.b.COMMENTS.SHOW_NESTED_COMMENTS_BUTTON(t.id),children:["Show ",t.kids.length," nested comments"]})]})})})},$={commentWrapper:{padding:"16px",marginBottom:"1rem",width:"calc(100% - 48px)"},commentInfoWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px"},commentAuthor:{fontSize:"0.875rem",fontWeight:"600",color:S.w8},commentDate:{fontSize:"0.75rem",fontWeight:"400",color:S.w8},commentTitle:{fontSize:"1rem",fontWeight:"400",color:S.w8},buttonWrapper:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"0.5rem"},nestedCommentsWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:"5rem",marginBottom:"1rem"},hiddenNestedCommetsWrapper:{marginBottom:"0"}},P=e=>{let{comment:t}=e;return(0,A.jsxs)(i.A,{sx:$.commentWrapper,"data-testid":p.b.COMMENTS.COMMENT_ITEM(t.id),children:[(0,A.jsxs)(i.A,{sx:$.commentInfoWrapper,children:[(0,A.jsx)(x.A,{sx:$.commentAuthor,children:t.by}),(0,A.jsx)(x.A,{sx:$.commentDate,children:E.r.formatTimeAgo(t.time)})]}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(i.A,{children:(0,A.jsx)(x.A,{sx:$.commentTitle,children:t.text})}),(0,A.jsx)(H,{comment:t})]})};var B=r(3849),Y=r(9535);const z="\n0px 7px 34px 6px rgba(0, 0, 0, 0.12),\n0px 18px 28px 2px rgba(0, 0, 0, 0.14),\n0px 9px 11px -5px rgba(0, 0, 0, 0.2)\n",U={commonWrapper:{backgroundColor:S.RC,height:`calc(100vh - ${Y.u}px)`,width:"100%",marginTop:`${Y.u}px`,overflowY:"auto",maxHeight:`calc(100vh - ${Y.u}px)`},contentWrapper:{maxHeight:`calc(100vh - ${Y.u}px)`,overflowY:"hidden"},loadingWrapper:{overflowY:"hidden"},storyWrapper:{width:"80vw",margin:"32px auto",padding:"1rem 1.5rem",borderRadius:"10px",backgroundColor:S.ON,boxShadow:z},topWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},title:{textAlign:"center",fontSize:"1.5rem",fontWeight:"600",color:S.Ql},redirectIcon:{width:"32px",height:"32px",color:S.Ql,cursor:"pointer","&:hover":{color:S.SG}},bottomWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"8px"},categoryWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},info:{fontSize:"0.875rem",fontWeight:"600",color:S.w8},category:{fontWeight:"400",marginRight:"0.5rem"}},G={commentsWrapper:{width:"80vw",margin:"32px auto",padding:"16px 24px",borderRadius:"10px",backgroundColor:S.ON,boxShadow:z},commentsTitle:{fontSize:"1.25rem",fontWeight:"600",color:S.Ql,margin:"8px 16px 16px"},listWrapper:{overflowY:"auto",height:`calc(100vh - ${Y.u+164+54+32+32}px)`}},V={commonWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",height:`calc(100vh - ${Y.u+164+54+32+32}px)`,width:"100%"},itemWrapper:{padding:"16px",border:`1px solid ${S.SG}`,borderRadius:"6px",marginBottom:"1rem",margin:"0 0 1rem",backgroundColor:S.iA,width:"calc(100% - 44px)"}},Q=()=>(0,A.jsxs)(i.A,{sx:V.commonWrapper,"data-testid":p.b.COMMENTS.COMMENTS_SKELETON,children:[(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]}),(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]}),(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]}),(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]}),(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]}),(0,A.jsxs)(i.A,{sx:V.itemWrapper,children:[(0,A.jsx)(B.A,{width:"100%",height:21}),(0,A.jsx)(g.X,{position:T.n.HORIZONTAL}),(0,A.jsx)(B.A,{width:"100%",height:24}),(0,A.jsx)(i.A,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.A,{width:220,height:33})})]})]});const X=r.p+"static/media/emptyCommentsList.36001a48f46ffb1c9b98eea84b2ce7fc.svg",K={placeholderWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:`calc(100vh - ${Y.u+164+54+32+32}px)`},textWrapper:{marginTop:"6rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"16px"},text:{fontSize:"1.125rem",fontWeight:"600",color:S.w8}},Z=e=>{let{hasError:t}=e;return(0,A.jsxs)(i.A,{sx:K.placeholderWrapper,"data-testid":t?p.b.COMMENTS.COMMENTS_ERROR_PLACEHOLDER:p.b.COMMENTS.COMMENTS_PLACEHOLDER,children:[(0,A.jsx)("img",{src:t?b.A:X,alt:"empty-comments",width:200}),(0,A.jsxs)(i.A,{sx:K.textWrapper,children:[(0,A.jsx)(x.A,{sx:K.text,children:t?"Oops! Comments went on a break.":"No comments yet."}),(0,A.jsx)(x.A,{sx:K.text,children:t?"We're having trouble loading them. Please try again later.":"They will appear once published."})]})]})},F=e=>{let{storyId:t,isLoading:r,hasError:o}=e;const n=(0,a.GV)(e=>t?((e,t)=>(0,l.jM)(e.hackerNews.storyComments[t],e=>e))(e,t):[]);return(0,A.jsxs)(i.A,{sx:G.commentsWrapper,"data-testid":p.b.COMMENTS.COMMENTS_ROOT(t),children:[(0,A.jsx)(x.A,{sx:G.commentsTitle,children:"Comments:"}),(0,A.jsx)(i.A,{sx:G.listWrapper,children:r?(0,A.jsx)(Q,{}):null!==n&&void 0!==n&&n.length?null===n||void 0===n?void 0:n.map(e=>(0,A.jsx)(P,{comment:e},e.id)):(0,A.jsx)(Z,{hasError:o})})]})},q=(0,u.A)((0,A.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");const J=r.p+"static/media/storyHeaderError.ae9ebb64b57c2dbfd8ddf8726337949c.svg",ee={errorWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-start"},title:{fontSize:"1.5rem",fontWeight:"600",color:S.Ql,marginLeft:"2rem"}},te=()=>(0,A.jsxs)(i.A,{sx:ee.errorWrapper,"data-testid":p.b.STORY_PAGE.STORY_HEADER_ERROR_PLACEHOLDER,children:[(0,A.jsx)("img",{src:J,alt:"story-header-error",width:64}),(0,A.jsx)(x.A,{sx:ee.title,children:"News details are playing hide and seek! We'll refresh and try to find them again."})]}),re={commonWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%"},topWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between"}},oe=()=>(0,A.jsxs)(i.A,{sx:re.commonWrapper,"data-testid":p.b.STORY_PAGE.STORY_HEADER_SKELETON,children:[(0,A.jsxs)(i.A,{width:"100%",sx:re.topWrapper,children:[(0,A.jsx)(B.A,{height:36,width:650}),(0,A.jsx)(B.A,{height:32,width:32})]}),(0,A.jsx)(B.A,{height:24,width:"100%"})]}),ne=e=>{let{isLoading:t,hasError:r}=e;const o=(0,n.g)(),s=(0,a.GV)(e=>((e,t)=>(0,l.jM)(e.hackerNews.activeStories[t],e=>e))(e,Number(o.id)));return(0,A.jsx)(i.A,{sx:U.storyWrapper,"data-testid":p.b.STORY_PAGE.STORY_HEADER(Number(o.id)),children:t?(0,A.jsx)(oe,{}):r?(0,A.jsx)(te,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(i.A,{sx:U.topWrapper,children:[(0,A.jsx)(x.A,{sx:U.title,"data-testid":p.b.STORY_PAGE.STORY_HEADER_TITLE(null===s||void 0===s?void 0:s.id),children:null===s||void 0===s?void 0:s.title}),(0,A.jsx)(q,{onClick:()=>{window.open(null===s||void 0===s?void 0:s.url)},sx:U.redirectIcon,"data-testid":p.b.STORY_PAGE.STORY_HEADER_REDIRECT_TO_STORY(null===s||void 0===s?void 0:s.id)})]}),(0,A.jsxs)(i.A,{sx:U.bottomWrapper,children:[(0,A.jsxs)(i.A,{sx:U.categoryWrapper,children:[(0,A.jsx)(x.A,{sx:{...U.info,...U.category},children:"Published:"}),(0,A.jsx)(x.A,{sx:U.info,"data-testid":p.b.STORY_PAGE.STORY_HEADER_PUBLISHED(null===s||void 0===s?void 0:s.id),children:null!==s&&void 0!==s&&s.time?E.r.formatTimeAgo(null===s||void 0===s?void 0:s.time):""})]}),(0,A.jsx)(g.X,{position:T.n.VERTICAL,height:24}),(0,A.jsxs)(i.A,{sx:U.categoryWrapper,children:[(0,A.jsx)(x.A,{sx:{...U.info,...U.category},children:"Author:"}),(0,A.jsx)(x.A,{sx:U.info,"data-testid":p.b.STORY_PAGE.STORY_HEADER_AUTHOR(null===s||void 0===s?void 0:s.id),children:null===s||void 0===s?void 0:s.by})]})]})]})})};const ie=function(){const e=(0,n.g)(),t=(0,a.GV)(c),r=(0,a.jL)(),[l,x]=(0,o.useState)(!1),[g,E]=(0,o.useState)(!1),[T,u]=(0,o.useState)(!1),j=async()=>{try{E(!1),u(!1),x(!0);const t=h.Q.getIdFromUrl(e.id),o=await r((0,d.En)(t)).unwrap();r((0,d.nY)({id:o.id,story:o})),await(async t=>{try{if(!t)return;const o=t.map(e=>r((0,d.k9)(e)).unwrap());await Promise.all(o).then(t=>{r((0,d.X0)({id:Number(e.id),comments:t}))})}catch(o){u(!0)}})(o.kids||[])}catch(t){E(!0)}finally{x(!1)}};return(0,o.useEffect)(()=>{m.getObjectKeys(t).includes(e.id||"")||j()},[]),(0,A.jsxs)(i.A,{sx:U.commonWrapper,"data-testid":p.b.STORY_PAGE.STORY_PAGE_ROOT(Number(e.id)),children:[(0,A.jsx)(s.Y,{showBack:!0}),(0,A.jsxs)(i.A,{sx:U.contentWrapper,children:[(0,A.jsx)(ne,{isLoading:l,hasError:g}),(0,A.jsx)(F,{storyId:Number(e.id),isLoading:l,hasError:T||g})]})]})}},9535:(e,t,r)=>{r.d(t,{R:()=>i,u:()=>n});var o=r(3942);const n=60,i={commonWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"calc(100% - 48px)",padding:"14px 24px",backgroundColor:o.Zv,position:"fixed",top:0,left:0,zIndex:1e3},title:{fontSize:"1.25rem",fontWeight:"600",color:"inherit",marginLeft:"1rem"},button:e=>({display:"flex",alignItems:"center",cursor:"pointer",color:e?o.w8:o.RC,"&:hover":{color:o.w8}}),activeButton:{color:o.w8},disabledButton:{display:"flex",alignItems:"center",color:o.OT},rightButtonWrapper:{display:"flex",alignItems:"center",gap:"8px"},icon:{color:"inherit",width:"32px",height:"32px"},logoWrapper:{display:"flex",alignItems:"center",cursor:"pointer",color:o.RC,"&:hover":{color:o.w8}},disabledLogoWrapper:{cursor:"default",color:o.OT,"&:hover":{color:o.OT}}}}}]);
//# sourceMappingURL=352.db454727.chunk.js.map