"use strict";(self.webpackChunkhacker_news=self.webpackChunkhacker_news||[]).push([[884],{1319:(e,t,s)=>{s.d(t,{o:()=>o});const o=e=>e.hackerNews.showedStoryType},1801:(e,t,s)=>{s.d(t,{S:()=>r});const o="https://hacker-news.firebaseio.com/v0",r={STORY:e=>`${o}/item/${e}.json?print=pretty`,USER:e=>`${o}/user/${e}.json`,COMMENT:e=>`${o}/item/${e}.json`,MAX_ITEM_ID:`${o}/maxitem.json`,TOP_STORIES:`${o}/topstories.json`,NEW_STORIES:`${o}/newstories.json?print=pretty`,ASK_STORIES:`${o}/askstories.json`,SHOW_STORIES:`${o}/showstories.json`,JOB_STORIES:`${o}/jobstories.json`,BEST_STORIES:`${o}/beststories.json`,ITEM:e=>`${o}/item/${e}.json`,ITEM_BY_ID:e=>`${o}/item/${e}.json`}},2157:(e,t,s)=>{s.d(t,{Y:()=>b});var o=s(5043),r=s(3216),i=s(3969),n=s(7799),a=s(9302),l=s(1274),c=s(4254),d=s(4874),h=s(5761),p=s(6638),x=s(3008),T=s(5360),m=s(2156),E=s(9185),A=s(1319),g=s(7523),S=s(3942);const O={menuItem:{backgroundColor:S.ON,width:"150px",color:S.w8,"&:hover":{color:S.w8,backgroundColor:S.OT}},activeMenuItem:{color:S.zF,backgroundColor:S.yP},title:{fontSize:"0.875rem",color:"inherit",marginLeft:"0.5rem"},activeTitle:{fontWeight:"600",color:"inherit"},activeIcon:{color:"inherit"}};var u=s(458),j=s(1777),w=s(6788),I=s(3736),R=s(3830),f=s(8358),_=s(2632),N=s(579);const W=[{value:_.k.ASK,title:"Ask",icon:e=>(0,N.jsx)(w.A,{sx:e})},{value:_.k.BEST,title:"Best",icon:e=>(0,N.jsx)(u.A,{sx:e})},{value:_.k.JOB,title:"Job",icon:e=>(0,N.jsx)(I.A,{sx:e})},{value:_.k.NEW,title:"New",icon:e=>(0,N.jsx)(j.A,{sx:e})},{value:_.k.SHOW,title:"Show",icon:e=>(0,N.jsx)(f.A,{sx:e})},{value:_.k.TOP,title:"Top",icon:e=>(0,N.jsx)(R.A,{sx:e})}],y=e=>{let{open:t,switcherOpen:s,closeSwitcher:o}=e;const r=(0,g.GV)(A.o),i=(0,g.jL)(),a=e=>e===r;return(0,N.jsx)(T.A,{open:t,anchorEl:s,onClose:o,disableAutoFocusItem:!0,"data-testid":p.b.NEWS_TYPE_SWITCHER.SWITCHER_ROOT,children:W.map(e=>(0,N.jsxs)(m.A,{onClick:()=>{return t=e.value,i((0,E.CA)()),i((0,E._c)()),i((0,E.BY)()),i(null===E.cR||void 0===E.cR?void 0:(0,E.cR)(t)),void o();var t},sx:{...O.menuItem,...a(e.value)&&O.activeMenuItem},"data-testid":p.b.NEWS_TYPE_SWITCHER.SWITCHER_ITEM(e.value),children:[e.icon(a(e.value)&&O.activeIcon),(0,N.jsx)(n.A,{sx:{...O.title,...a(e.value)&&O.activeTitle},children:e.title})]},e.value))})};var v=s(9535);const b=e=>{let{showBack:t,showUpdate:s,showMenu:T,isLoading:m,refreshNews:E}=e;const A=(0,r.Zp)(),g=(0,r.g)(),[S,O]=(0,o.useState)(null),u=Boolean(S);return(0,N.jsxs)(i.A,{sx:v.R.commonWrapper,"data-testid":p.b.HEADER.HEADER_ROOT,children:[(0,N.jsx)(i.A,{sx:{...v.R.button,visibility:t?"visible":"hidden"},onClick:()=>{x.Q.getIdFromUrl(g.id)?A(h.e.NEWS_LIST,{state:{fromBack:!0}}):A(h.e.START_PAGE)},"data-testid":p.b.HEADER.BACK_BUTTON,children:(0,N.jsx)(c.A,{sx:v.R.icon})}),(0,N.jsxs)(i.A,{sx:v.R.logoWrapper,"data-testid":p.b.HEADER.APP_LOGO,onClick:()=>{A(h.e.START_PAGE)},children:[(0,N.jsx)(d.g,{size:32}),(0,N.jsx)(n.A,{sx:v.R.title,children:"Hacker News"})]}),(0,N.jsxs)(i.A,{sx:v.R.rightButtonWrapper,children:[(0,N.jsx)(i.A,{sx:{...m?v.R.disabledButton:v.R.button,visibility:s?"visible":"hidden"},onClick:E,"data-testid":p.b.HEADER.UPDATE_BUTTON,children:(0,N.jsx)(a.A,{sx:v.R.icon})}),(0,N.jsx)(i.A,{sx:{...m?v.R.disabledButton:v.R.button,visibility:T?"visible":"hidden"},onClick:e=>{O(e.currentTarget)},"data-testid":p.b.HEADER.MENU_BUTTON,children:(0,N.jsx)(l.A,{sx:v.R.icon})})]}),u&&(0,N.jsx)(y,{open:u,switcherOpen:S,closeSwitcher:()=>{O(null)}})]})}},2538:(e,t,s)=>{s.d(t,{r:()=>o});class o{static formatTimeAgo(e){if(e<0)throw new Error("Timestamp cannot be negative");const t=Date.now(),s=Math.floor((t-1e3*e)/1e3);if(s<0)throw new Error("Timestamp cannot be negative");const o=3600;if(s<60)return`${s} second${1!==s?"s":""} ago`;if(s<o){const e=Math.floor(s/60);return`${e} minute${1!==e?"s":""} ago`}if(s<86400){const e=Math.floor(s/o);return`${e} hour${1!==e?"s":""} ago`}const r=Math.floor(s/86400);return`${r} day${1!==r?"s":""} ago`}}},3008:(e,t,s)=>{s.d(t,{Q:()=>r});var o=s(1387);class r{static generatePathWithId(e,t){if(t<0)throw new Error("ID cannot be negative.");if(0===t)throw new Error("ID cannot be 0.");return(0,o.tW)(e,{id:t})}static cutIdFromUrl(){const e=new URL(window.location.href).pathname.split("/").slice(0,3).join("/");window.history.replaceState({},"",e.toString())}static getIdFromUrl(e){return Number(e)}static getTestUrl(e,t){return`/${e.split("/")[1]}/${t}`}}},4874:(e,t,s)=>{s.d(t,{g:()=>l});var o=s(3969);s(5043);const r=s.p+"static/media/mainLogo.20ca4fb8dec9041b1379fd1dfacea91f.svg";var i=s(3942);const n=e=>({backgroundColor:i.Ql,height:`${e}px`});var a=s(579);const l=e=>{let{size:t,testId:s}=e;return(0,a.jsx)(o.A,{sx:n(t),"data-testid":s,children:(0,a.jsx)("img",{src:r,alt:"app-logo",width:t,height:t})})}},6638:(e,t,s)=>{s.d(t,{b:()=>o});const o={START_PAGE:{START_PAGE_ROOT:"start-page-root",GO_TO_NEWS_BUTTON:"go-to-news-button",APP_LOGO:"app-logo",APP_TITLE:"app-title"},NEWS_PAGE:{NEWS_PAGE_ROOT:"news-page-root",NEWS_ITEM_IN_LIST:e=>`news-list-in-list-${e}`},STORY_PAGE:{STORY_PAGE_ROOT:e=>`story-page-root-${e}`,STORY_HEADER:e=>`story-header-${e}`,STORY_HEADER_SKELETON:"story-header-skeleton",STORY_HEADER_TITLE:e=>`story-header-title-${e}`,STORY_HEADER_AUTHOR:e=>`story-header-author-${e}`,STORY_HEADER_PUBLISHED:e=>`story-header-published-${e}`,STORY_HEADER_REDIRECT_TO_STORY:e=>`story-header-redirect-to-story-${e}`},COMMENTS:{COMMENTS_ROOT:e=>`comments-root-${e}`,COMMENT_ITEM:e=>`comment-item-${e}`,SHOW_NESTED_COMMENS_BUTTON:e=>`show-nested-comments-button-${e}`,HIDE_NESTED_COMMENTS_BUTTON:e=>`hide-nested-comments-button-${e}`,NESTED_COMMENTS_ROOT:e=>`nested-comments-root-${e}`,COMMENTS_SKELETON:"comments-skeleton",COMMENTS_PLACEHOLDER:"comments-placeholder"},HEADER:{HEADER_ROOT:"header-root",BACK_BUTTON:"back-button",UPDATE_BUTTON:"update-button",MENU_BUTTON:"menu-button",APP_LOGO:"app-logo"},NEWS_SKELETON:"news-skeleton",NEWS_PLACEHOLDER:"news-placeholder",NEWS_TYPE_SWITCHER:{SWITCHER_ROOT:"switcher-root",SWITCHER_ITEM:e=>`switcher-item-${e}`}}},7523:(e,t,s)=>{s.d(t,{GV:()=>n,S4:()=>a,jL:()=>i});var o=s(673),r=s(3003);const i=r.wA,n=r.d4,a=o.zD.withTypes()},8856:(e,t,s)=>{s.d(t,{X:()=>l});var o=s(3969),r=s(8996),i=s(3942);const n={horizontal:{backgroundColor:i.w8,margin:"0.75rem 0",height:"1px",width:"100%"},vertical:{height:"24px",width:"2px",backgroundColor:i.w8}};var a=s(579);const l=e=>{let{position:t}=e;return(0,a.jsx)(o.A,{sx:t===r.n.VERTICAL?n.vertical:n.horizontal})}},8996:(e,t,s)=>{s.d(t,{n:()=>o});const o={VERTICAL:"vertical",HORIZONTAL:"horizontal"}},9185:(e,t,s)=>{s.d(t,{nY:()=>d,x8:()=>T,X0:()=>p,BY:()=>h,CA:()=>E,_c:()=>x,k9:()=>O,En:()=>S,Ym:()=>g,QJ:()=>m,eq:()=>c,cR:()=>A});var o=s(7523),r=s(1801),i=s(854),n=s.n(i);class a{static getHeaders(){return{headers:{"Content-Type":"application/json"}}}static get(e){return n().get(e,this.getHeaders())}}var l=s(9403);const{setNewStories:c,addActiveStory:d,clearActiveStories:h,addStoryComments:p,clearAllStoryComments:x,addNestedCommentsById:T,removeNestedCommentsById:m,clearAllNestedComments:E,setShowedStoryType:A}=l._.actions,g=(0,o.S4)("hackerNews/getStoryIds",async e=>{try{return(await a.get(e)).data}catch(t){console.log(t)}}),S=(0,o.S4)("hackerNews/getStoryById",async e=>{try{return(await a.get(r.S.STORY(e))).data}catch(t){console.log(t)}}),O=(0,o.S4)("hackerNews/getCommentById",async e=>{try{return(await a.get(r.S.COMMENT(e))).data}catch(t){console.log(t)}})},9535:(e,t,s)=>{s.d(t,{R:()=>i,u:()=>r});var o=s(3942);const r=60,i={commonWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"calc(100% - 48px)",padding:"14px 24px",backgroundColor:o.Zv,position:"fixed",top:0,left:0,zIndex:1e3},title:{fontSize:"1.25rem",fontWeight:"600",color:"inherit",marginLeft:"1rem"},button:{display:"flex",alignItems:"center",cursor:"pointer",color:o.Ql,"&:hover":{color:o.ON},"&:active":{color:o.Ql}},disabledButton:{display:"flex",alignItems:"center",color:o.OT},rightButtonWrapper:{display:"flex",alignItems:"center",gap:"8px"},icon:{color:"inherit",width:"32px",height:"32px"},logoWrapper:{display:"flex",alignItems:"center",cursor:"pointer",color:o.Ql,"&:hover":{color:o.ON}}}},9884:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var o=s(5043),r=s(3216),i=s(3969),n=s(7523),a=s(9185),l=s(1603);const c=e=>(0,l.jM)(e.hackerNews.newStories,e=>e);var d=s(1319),h=s(6638),p=s(1801),x=s(2632);const T={[x.k.ASK]:p.S.ASK_STORIES,[x.k.BEST]:p.S.BEST_STORIES,[x.k.JOB]:p.S.JOB_STORIES,[x.k.NEW]:p.S.NEW_STORIES,[x.k.SHOW]:p.S.SHOW_STORIES,[x.k.TOP]:p.S.TOP_STORIES};var m=s(2157),E=s(7799),A=s(8856),g=s(5761),S=s(2538),O=s(3008),u=s(8996),j=s(3942);const w={newsItemWrapper:{display:"flex",flexDirection:"column",border:`1px solid ${j.SG}`,borderRadius:"6px",margin:"0 0 1rem",padding:"1rem 0.75rem",backgroundColor:j.ON,"&:hover":{cursor:"pointer",boxShadow:`0 0 0 1px ${j.SG}`,backgroundColor:j.iA}},newsInfoWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 0.5rem"},titleWrapper:{display:"inline-block",padding:"0 0.5rem"},storyTitle:{fontSize:"1rem",fontWeight:"600",color:j.Ql,width:"auto"},infoItemWrapper:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:"1rem"},infoTitle:{fontSize:"0.75rem",fontWeight:"600",color:j.w8},categoryTitle:{fontWeight:"400",marginRight:"0.25rem"},divider:{backgroundColor:j.w8,margin:"0.75rem 0",height:"1px",width:"100%"}};var I=s(579);const R=e=>{let{item:t}=e;const s=(0,r.Zp)();return(0,I.jsxs)(i.A,{sx:w.newsItemWrapper,onClick:()=>(async e=>{try{s(O.Q.generatePathWithId(g.e.NEWS_ITEM,e))}catch(t){console.log(t)}})(t.id),"data-testid":h.b.NEWS_PAGE.NEWS_ITEM_IN_LIST(t.id),children:[(0,I.jsx)(i.A,{sx:w.titleWrapper,children:(0,I.jsx)(E.A,{sx:w.storyTitle,children:t.title})}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsxs)(i.A,{sx:w.newsInfoWrapper,children:[(0,I.jsxs)(i.A,{sx:w.infoItemWrapper,children:[(0,I.jsx)(E.A,{sx:{...w.infoTitle,...w.categoryTitle},children:"The Author:"}),(0,I.jsx)(E.A,{sx:w.infoTitle,children:t.by})]}),(0,I.jsxs)(i.A,{sx:w.infoItemWrapper,children:[(0,I.jsx)(E.A,{sx:{...w.infoTitle,...w.categoryTitle},children:"Rating:"}),(0,I.jsx)(E.A,{sx:w.infoTitle,children:t.score})]}),(0,I.jsxs)(i.A,{sx:w.infoItemWrapper,children:[(0,I.jsx)(E.A,{sx:{...w.infoTitle,...w.categoryTitle},children:"Published:"}),(0,I.jsx)(E.A,{sx:w.infoTitle,children:S.r.formatTimeAgo(t.time)})]})]})]},t.id)};var f=s(3849);const _={commonWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflowY:"hidden",maxHeight:"100vh",width:"100%"},skeletonItemWrapper:{display:"flex",flexDirection:"column",border:`1px solid ${j.SG}`,borderRadius:"6px",marginBottom:"1rem",padding:"16px 12px",width:"calc(100% - 26px)",backgroundColor:j.ON}},N=()=>(0,I.jsxs)(i.A,{sx:_.commonWrapper,"data-testid":h.b.NEWS_SKELETON,children:[(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]}),(0,I.jsxs)(i.A,{sx:_.skeletonItemWrapper,children:[(0,I.jsx)(f.A,{height:24,width:"100%"}),(0,I.jsx)(A.X,{position:u.n.HORIZONTAL}),(0,I.jsx)(f.A,{height:18,width:"100%"})]})]});const W=s.p+"static/media/emptyNewsList.076dc0b51a99cfe34d27fd9b5efa34fb.svg";var y=s(9535);const v={placeholderWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:`calc(100vh - ${2*y.u+4}px)`},textWrapper:{marginTop:"6rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"16px"},text:{fontSize:"1.125rem",fontWeight:"600",color:j.w8}},b=()=>(0,I.jsxs)(i.A,{sx:v.placeholderWrapper,"data-testid":h.b.NEWS_PLACEHOLDER,children:[(0,I.jsx)("img",{src:W,width:200,alt:"empty-list"}),(0,I.jsxs)(i.A,{sx:v.textWrapper,children:[(0,I.jsx)(E.A,{sx:v.text,children:"It's quiet here, like in outer space."}),(0,I.jsx)(E.A,{sx:v.text,children:"No news yet, but they're on the way!"})]})]}),k={mainWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},contentWrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:`${y.u}px`,overflowY:"auto",maxHeight:`calc(100vh - ${y.u}px)`,backgroundColor:j.RC},loadingWrapper:{overflowY:"hidden"},listWrapper:{width:"60vw",backgroundColor:j.ON,padding:"2rem 4rem"}};const C=function(){const e=(0,n.GV)(c),t=(0,n.GV)(d.o),s=(0,n.jL)(),l=(0,r.Zp)(),p=(0,r.zy)(),[x,E]=(0,o.useState)(!1),A=async()=>{if(!x)try{E(!0);const e=await s((0,a.Ym)(T[t])).unwrap();await(async e=>{const t=e.slice(0,100).map(e=>s((0,a.En)(e)).unwrap());await Promise.all(t).then(e=>s((0,a.eq)(e)))})(e)}catch(e){}finally{E(!1)}};return(0,o.useEffect)(()=>{var t,s;null!==(t=p.state)&&void 0!==t&&t.fromBack&&l(".",{state:{fromBack:!1},replace:!0}),null!==(s=p.state)&&void 0!==s&&s.fromBack&&0!==e.length||A()},[t]),(0,I.jsxs)(i.A,{sx:k.mainWrapper,"data-testid":h.b.NEWS_PAGE.NEWS_PAGE_ROOT,children:[(0,I.jsx)(m.Y,{refreshNews:A,isLoading:x,showUpdate:!0,showMenu:!0}),(0,I.jsx)(i.A,{sx:{...k.contentWrapper,...x&&k.loadingWrapper},children:(0,I.jsx)(i.A,{sx:k.listWrapper,children:x?(0,I.jsx)(N,{}):0!==e.length||x?e.map(e=>(0,I.jsx)(R,{item:e},e.id)):(0,I.jsx)(b,{})})})]})}}}]);
//# sourceMappingURL=884.448e85d8.chunk.js.map